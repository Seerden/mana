(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{30:function(e,t,a){},33:function(e,t,a){e.exports=a(76)},38:function(e,t,a){},39:function(e,t,a){},40:function(e,t,a){},61:function(e,t,a){},62:function(e,t,a){},65:function(e,t,a){},66:function(e,t,a){},67:function(e,t,a){},68:function(e,t,a){},69:function(e,t,a){},70:function(e,t,a){},71:function(e,t,a){},72:function(e,t,a){},73:function(e,t,a){},74:function(e,t,a){},75:function(e,t,a){},76:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(31),s=a.n(c),l=(a(38),a(4)),o=a(3),i=(a(39),a(17)),u=a(1),m=a(2),d=a(9),f=function(e,t,a){Object(n.useEffect)((function(){t&&console.log("".concat(e," changed:"),t)}),[e,t,a])},b=function(e,t,a){var n=e.currentTarget;(t[n.name]||n.value)&&(!t[n.name]||t[n.name]&&t[n.name]!==n.value)&&a(Object(m.a)(Object(m.a)({},t),{},Object(d.a)({},n.name,n.value)))},E=function(e,t){switch(t){case"set":localStorage.setItem("username",e);break;case"get":return localStorage.getItem("username");case"remove":localStorage.removeItem("username")}},v=Object(n.createContext)(null),p=Object(n.memo)((function(e){var t=Object(n.useState)(E(null,"get")),a=Object(u.a)(t,2),c=a[0],s=a[1];return f("LoginContext: currentUser",c),Object(n.useEffect)((function(){}),[]),r.a.createElement(v.Provider,{value:Object(m.a)({},{currentUser:c,login:function(e){s(e),E(e,"set")},logout:function(){s(null),E(null,"remove")}})},e.children)})),g=(a(40),function(){return{location:Object(o.f)(),navigate:Object(o.g)(),params:Object(o.h)()}}),h=(a(12),a(15),a(6)),O=a.n(h);O.a.defaults.withCredentials=!0;var j=function(e){var t=Object(n.useState)({}),a=Object(u.a)(t,2),c=a[0],s=a[1],o=g(),i=o.navigate,m=(o.location,Object(n.useContext)(v).currentUser,Object(n.useState)(!1)),d=Object(u.a)(m,2),f=d[0],E=d[1],p=function(e,t){var a=Object(n.useContext)(v),r=(a.currentUser,a.login),c=Object(n.useState)(null),s=Object(u.a)(c,2),l=s[0],o=s[1],i=Object(n.useState)(!1),m=Object(u.a)(i,2),d=m[0],f=m[1];return Object(n.useEffect)((function(){e&&(console.log("posting user to db"),O.a.post("/db/user",t).then((function(e){o(e.data.username),r(e.data.username)})).catch((function(e){return f(e)})))}),[e]),[l,d]}(f,c),h=Object(u.a)(p,2),j=h[0];h[1];return Object(n.useEffect)((function(){j&&i("/u/".concat(j))}),[j]),r.a.createElement("div",{className:"PageWrapper"},r.a.createElement("div",{className:"Login"},r.a.createElement("div",{className:"PageHeader"},"You're not currently logged in. Log in or register."),r.a.createElement("form",{className:"Login__form"},r.a.createElement("header",{className:"Login__form--header"},"Log in"),r.a.createElement("label",{htmlFor:"username"},"Username"),r.a.createElement("input",{autoComplete:"username",onBlur:function(e){return b(e,c,s)},type:"text",name:"username"}),r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{autoComplete:"password",onBlur:function(e){return b(e,c,s)},type:"password",name:"password"}),r.a.createElement("input",{onClick:function(){return E(!0)},className:"Login__button",type:"button",value:"Log in"}),r.a.createElement(l.b,{to:"/register"},"Register"))))},_=function(e){var t=e.component,a=(Object(i.a)(e,["component"]),Object(n.useState)(null)),c=Object(u.a)(a,2),s=c[0],l=c[1],o=Object(n.useContext)(v).currentUser,m=g(),d=m.params,f=m.location,b=Object(n.useState)(!!o),E=Object(u.a)(b,2),p=E[0],h=E[1];return Object(n.useEffect)((function(){l(r.a.createElement(t,{key:Date.now()}))}),[t,d,f,o]),Object(n.useEffect)((function(){h(!!o)}),[o]),r.a.createElement(r.a.Fragment,null,p?r.a.createElement(r.a.Fragment,null,s&&s):r.a.createElement(j,null))},w=function(e){var t=e.component,a=e.children,n=Object(i.a)(e,["component","children"]);return a?(console.log(a),null):r.a.createElement(o.a,Object.assign({},n,{element:r.a.createElement(_,{component:t})}))},N=(a(61),Object(n.memo)((function(){var e=Object(n.useContext)(v).currentUser;return r.a.createElement("div",{className:"Header"},e?r.a.createElement(y,null):r.a.createElement(k,null))}))),y=function(){var e=Object(n.useContext)(v),t=e.currentUser,a=e.logout;return r.a.createElement("nav",null,r.a.createElement("span",{id:"Logo"},"Mana"),r.a.createElement(l.c,{className:"NavLink",to:"/"},"Home"),r.a.createElement(l.c,{className:"NavLink",to:"/u/".concat(t)},"My Profile"),r.a.createElement(l.c,{className:"NavLink",to:"/u/".concat(t,"/lists")},"My Lists"),r.a.createElement("button",{onClick:function(){return a()}},"Log Out"))},k=function(){return r.a.createElement("nav",null,r.a.createElement("span",{id:"Logo"},"Mana"),r.a.createElement(l.c,{className:"NavLink",to:"/"},"Home"),r.a.createElement(l.c,{className:"NavLink",to:"/login"},"Log in"),r.a.createElement(l.c,{className:"NavLink",to:"/register"},"Register"))},L=(a(62),function(e){return r.a.createElement("div",{className:"Footer"},r.a.createElement("div",{className:"Footer__item"},r.a.createElement("a",{href:"https://github.com/Seerden/mana"},r.a.createElement("img",{src:"".concat("","/assets/github.png"),width:"16",height:"16",alt:"GitHub Logo"}))))}),R=a(8),C=a(10),S=function(e,t){for(var a=[],n=function(){for(var t,a=Object(R.a)(e),n=[],r=a.length-1;r>0;){var c=[a[t=Math.floor((r+1)*Math.random())],a[r]];a[r]=c[0],a[t]=c[1],n.push(t),r-=1}return a},r=0;r<t;)a=[].concat(Object(R.a)(a),Object(R.a)(n())),r++;return a},x=Object(n.createContext)(null),T=Object(n.memo)((function(e){var t=Object(n.useState)({settings:{direction:"forwards",n:"2",started:!1}}),a=Object(u.a)(t,2),c=a[0],s=a[1];return r.a.createElement(x.Provider,{value:Object(m.a)({},{reviewContext:c,setReviewContext:s})},e.children)})),H=Object(n.memo)((function(e){var t=e.direction,a=e.term,c=Object(n.useState)("forwards"===t?"from":"to"),s=Object(u.a)(c,2),l=s[0],o=s[1],i=Object(n.useState)(!1),m=Object(u.a)(i,2),d=m[0],f=m[1],b=Object(n.useState)(!1),E=Object(u.a)(b,2),v=E[0],p=E[1];Object(n.useEffect)((function(){return window.addEventListener("keyup",g),function(){window.removeEventListener("keyup",g)}}),[l]),Object(n.useEffect)((function(){o("forwards"===t?"from":"to"),p(!0),setTimeout((function(){return p(!1)}),150)}),[a]);var g=function(e){["ArrowUp","ArrowDown"].includes(e.code)&&h()},h=function(){f(!0),setTimeout((function(){return f(!1)}),250),setTimeout((function(){return o("from"===l?"to":"from")}),125)};return r.a.createElement("div",{onClick:h,className:"Review__current ReviewCard ".concat(v?"fadein":""," ").concat(d?"flip":"")},a[l])})),P=a(5),F=a.n(P),B=(a(65),function(e){var t=Object(n.useContext)(x),a=t.reviewContext,c=t.setReviewContext,s=a.settings,l=Object(n.useState)(null),o=Object(u.a)(l,2),i=o[0],f=o[1],b=Object(n.useState)(null),E=Object(u.a)(b,2),v=E[0],p=E[1];Object(n.useEffect)((function(){f([1,2,3,4,5].map((function(e){return r.a.createElement(M,{key:Object(C.v4)(),value:e,n:s.n,handleSettingsChange:g})}))),p(["forwards","backwards"].map((function(e){return r.a.createElement(M,{key:Object(C.v4)(),value:e,current:s.direction,direction:e,handleSettingsChange:g})})))}),[s]);var g=function(e){c(Object(m.a)(Object(m.a)({},a),{},{settings:Object(m.a)(Object(m.a)({},a.settings),{},Object(d.a)({},e.target.name,e.currentTarget.value))}))};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"PreReview"},r.a.createElement("div",{className:"PreReview__header PageHeader"},"Review settings"),r.a.createElement("form",{className:"PreReview__settings"},r.a.createElement("ul",{className:"PreReview__settings--list"},r.a.createElement("li",{key:Object(C.v4)()},r.a.createElement("label",{className:"PreReview__settings--label",htmlFor:"n"},"Number of cycles:"),r.a.createElement("p",{className:"PreReview__settings--tip"},"This is the number of times you need to get each term right to complete the session"),r.a.createElement("div",{className:"PreReview__settings--cycles"},i)),r.a.createElement("li",{key:Object(C.v4)()},r.a.createElement("label",{className:"PreReview__settings--label",htmlFor:"direction"},"Direction:"),r.a.createElement("p",{className:"PreReview__settings--tip"},"'Forwards' means you're shown the term in the original language, and need to recall the meaning in the secondary language. 'Backwards' is the other way around."),r.a.createElement("div",{className:"PreReview__settings--directionbuttons"},v))),r.a.createElement("input",{onClick:function(){return c(Object(m.a)(Object(m.a)({},a),{},{settings:Object(m.a)(Object(m.a)({},a.settings),{},{started:!0})}))},id:"PreReview__start",type:"button",value:"Start the review with these settings"}))))}),M=Object(n.memo)((function(e){var t,a=e.handleSettingsChange,n=e.direction,c=e.n,s=e.value,l=e.current;return c?t=String(c)===String(s):n&&(t=n===l),r.a.createElement("input",{style:{color:t?"white":"black",backgroundColor:t?"blueviolet":"white"},onClick:a,className:c?"PreReview__settings--n":"PreReview__settings--direction",name:c?"n":"direction",type:"button",value:s})})),D=function(e){var t=e.sessionStart,a=e.sessionEnd,n=e.list,c=g(),s=c.navigate,o=c.params,i=function(e){return F()(e).format("HH:mm:ss")};return r.a.createElement("div",{className:"Review__post"},r.a.createElement("h2",null,"Session completed."),r.a.createElement("div",null,"Started at ",i(t)),r.a.createElement("div",null,"Completed at ",i(a)),r.a.createElement("button",{className:"Button"},r.a.createElement(l.b,{to:"/u/".concat(n.owner,"/list/").concat(o.id)},"Back to list")),r.a.createElement("button",{className:"Button"},r.a.createElement(l.b,{to:"/u/".concat(n.owner,"/lists")},"Back to lists overview")),r.a.createElement("button",{onClick:function(){return s(0)},className:"Button"},r.a.createElement(l.b,{to:"/u/".concat(n.owner,"/list/").concat(o.id,"/review")},"Review this list again")))},I=a(13),q=a.n(I);F.a.extend(q.a);var U=Object(n.memo)((function(e){var t=e.start,a=Object(n.useState)(null),c=Object(u.a)(a,2),s=c[0],l=c[1],o=Object(n.useState)(0),i=Object(u.a)(o,2),m=i[0],d=i[1];return Object(n.useEffect)((function(){var e=setInterval((function(){return d(Math.round(Math.floor(Date.now()-t)/1e3))}),1e3);return function(){return clearInterval(e)}}),[]),Object(n.useEffect)((function(){l(F()(t).fromNow())}),[m]),r.a.createElement("span",{title:"".concat(F()(t).format("hh:mm:ss A")),className:"Timer"},r.a.createElement("strong",null,s))})),A=(a(66),Object(n.memo)((function(e){var t=e.start,a=e.numTerms,n=e.n,c=e.progress;return r.a.createElement("details",{className:"Review__info"},r.a.createElement("summary",null,r.a.createElement("span",{className:"Review__info--header"},r.a.createElement("span",null,"Session information"))),r.a.createElement("div",{className:"Review__info--dynamic"},r.a.createElement("div",{className:"Review__info--completion"},"Session completion: ",c,"%.",r.a.createElement("div",null,"You started this session ",r.a.createElement(U,{start:t}),"."))),r.a.createElement("div",{className:"Review__info--hideable"},r.a.createElement("div",null,"Number of terms in this list: ",r.a.createElement("strong",null,a),"."),r.a.createElement("div",null,"Pass each term ",r.a.createElement("strong",null,n," time",1!==n?"s":"")," to complete the session.")))}))),Y=(a(67),function(e){var t=e.handleResponse,a=e.handleError,r=Object(n.useContext)(v),c=r.currentUser,s=(r.login,r.logout),l=Object(n.useRef)(!1),o=g().params,i=Object(n.useState)(null),m=Object(u.a)(i,2),d=m[0],f=m[1],b=Object(n.useState)(null),E=Object(u.a)(b,2),p=E[0],h=E[1],j=Object(n.useState)(null),_=Object(u.a)(j,2),w=_[0],N=_[1],y=Object(n.useState)(!1),k=Object(u.a)(y,2),L=k[0],R=k[1],C=O.a.CancelToken.source(),S=function(){d().then((function(e){t(e,h)})).catch((function(e){e&&e.response&&401===e.response.status&&s(),console.log(typeof t),a(e,N)})),R(!1),f(null)};return Object(n.useEffect)((function(){return l.current=!0,o.username&&o.username===c&&(N(null),f(null)),function(){N(null),h(null),R(!1),f(null),l.current=!1}}),[]),Object(n.useEffect)((function(){return function(){return C.cancel("Component unmounted")}})),Object(n.useEffect)((function(){l.current&&d&&(R(!0),function(e,t,a){e&&c===e?(t(null),a()):(t("Route not accessible by current user."),R(!1))}(o.username,N,S))}),[d,o.username]),Object(n.useEffect)((function(){return function(){return C.cancel("Component was unmounted")}}),[c]),{response:p,error:w,loading:L,setRequest:f}});O.a.default.withCredentials=!0;var W=function(e,t){t(e)},V=function(e,t){return t(e.data)},J=function(){return{request:function(e,t){O.a.get("/db/u/".concat(e,"/list"),{params:t})},handleResponse:V,handleError:W}},G=function(){return{handleResponse:V,handleError:W}},K=function(e,t){return function(){return O.a.get("/db/u/".concat(e,"/list"),{params:t})}},z=function(e,t,a){return function(){return O.a.put("/db/u/".concat(e,"/list"),{data:{query:t,body:a}})}};var Q=Object(n.memo)((function(e){var t=g().params,a=Object(n.useState)((function(){return{start:new Date,end:!1}})),c=Object(u.a)(a,2),s=c[0],o=c[1],i=Object(n.useState)(null),d=Object(u.a)(i,2),f=d[0],b=d[1],E=Object(n.useState)(!1),v=Object(u.a)(E,2),p=v[0],h=(v[1],Object(n.useReducer)((function(e,t){switch(t.type){case"init":return t.payload;case"pass":return e.slice(1);case"fail":var a=Math.floor((e.length+1)*Math.random()),n=Object(R.a)(e),r=n.shift();return n.splice(a,0,r),n;default:return e}}),null)),O=Object(u.a)(h,2),j=O[0],_=O[1],w=Object(n.useState)(null),N=Object(u.a)(w,2),y=N[0],k=N[1],L=Object(n.useState)(0),T=Object(u.a)(L,2),P=T[0],M=T[1],I=Object(n.useContext)(x).reviewContext.settings,q=I.n,U=I.direction,W=I.started,V=Object(n.useRef)(null),Q=Object(n.useRef)(null),X=Y({handleResponse:function(e,t){(e=e.data).content&&e.content.length>0&&(t(e),b(e),_({type:"init",payload:S(e.content,q)}))},handleError:J().handleError}).setRequest,Z=Y(Object(m.a)({},G())).setRequest;function $(e){var t;switch(e.code){case"ArrowLeft":t=V;break;case"ArrowRight":t=Q;break;default:return}t.current&&(t.current.focus(),t.current.click(),setTimeout((function(){t.current&&t.current.blur()}),100))}function ee(e,t){e.preventDefault();!function(e,t){var a=Object(R.a)(f.content),n=a.findIndex((function(t){return t.to===e.to&&t.from===e.from}));if(a[n].history&&0!==a[n].history.length||(a[n].history=[{date:s.start,content:[]}]),a[n].history.length>0){var r=a[n].history.length,c=a[n].history[r-1];F()(c.date)<F()(s.start)?a[n].history.push({date:s.start,content:[t]}):a[n].history[r-1].content.push(t)}var l=Object(m.a)(Object(m.a)({},f),{},{content:Object(R.a)(a)});b(l)}(j[0],t);_({type:t})}return Object(n.useEffect)((function(){X((function(){return K(t.username,{_id:t.id})}))}),[]),Object(n.useEffect)((function(){f&&_({type:"init",payload:S(f.content,Number(q))})}),[q]),Object(n.useEffect)((function(){if(f&&j){var e=f.content.length*q,a=e-j.length;M(Math.floor(100*a/e))}return j&&j.length>0&&k(r.a.createElement(H,{key:Object(C.v4)(),direction:U,term:j[0]})),j&&0===j.length&&function(e){var a=new Date;o(Object(m.a)(Object(m.a)({},s),{},{end:a})),e.sessions.push({start:s.start,end:a,numTerms:e.content.length,termsReviewed:Number(q)*e.content.length,n:Number(q),direction:U}),e.lastReviewed=a,Z((function(){return z(t.username,{_id:t.id,owner:e.owner},e)}))}(f),window.addEventListener("keydown",$),function(){window.removeEventListener("keydown",$),k(null)}}),[j,U]),r.a.createElement("div",{className:"PageWrapper Review"},f&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"PageHeader Review__title"},r.a.createElement("div",null,"Reviewing",r.a.createElement("span",{className:"Review__title--name"},r.a.createElement("em",null,f.name))),r.a.createElement("div",null,r.a.createElement(l.b,{className:"Button",to:"/u/".concat(t.username,"/list/").concat(t.id)},"Back to list")))),f&&!W?r.a.createElement(r.a.Fragment,null,r.a.createElement(B,null)):r.a.createElement(r.a.Fragment,null,!s.end&&y&&r.a.createElement(r.a.Fragment,null,y,r.a.createElement("div",{className:"Review__buttons"},r.a.createElement("input",{ref:V,onClick:function(e){return ee(e,"fail")},className:"Review__button",id:"Review__button--fail",type:"button",value:"Fail"}),r.a.createElement("input",{ref:Q,onClick:function(e){return ee(e,"pass")},className:"Review__button",id:"Review__button--pass",type:"button",value:"Pass"})),r.a.createElement("div",{className:"Review__progress--wrapper"},r.a.createElement("div",{id:"Review__progress--bar",style:{width:"".concat(P,"%")}})),s.start&&r.a.createElement(A,{start:s.start,numTerms:f.content.length,n:q,progress:P})),s.end&&r.a.createElement(r.a.Fragment,null,r.a.createElement(D,{sessionStart:s.start,sessionEnd:s.end,list:f}))),p&&r.a.createElement("div",{className:"Error"},"List doesn't exist, or it exists but doesn't contain any terms to review."))})),X=(a(68),Object(n.createContext)(null)),Z=function(e){var t=Object(n.useState)((function(){})),a=Object(u.a)(t,2),c=a[0],s=a[1];return r.a.createElement(X.Provider,{value:{listContextValue:c,setListContextValue:s}},e.children)},$=(a(69),Object(n.memo)((function(e){var t=e.confirmingDelete,a=e.setConfirmingDelete,n=e.handleConfirmClick,c=e.isHovering;return r.a.createElement(r.a.Fragment,null,t&&r.a.createElement("div",{className:"Term__remove remove--confirm"},r.a.createElement("input",{title:"Keep term",onClick:function(e){return n(e,"keep")},className:"remove--keep",type:"button",value:"keep"}),r.a.createElement("input",{title:"Permanently delete term",onClick:function(e){return n(e,{type:"delete"})},className:"remove--delete",type:"button",value:"delete"})),!t&&c&&r.a.createElement("input",{onClick:function(){return a(!0)},className:"Term__remove remove--initial",type:"button",value:"x"}))}))),ee=(a(70),a(32)),te=a.n(ee);F.a.extend(te.a),F.a.extend(q.a);var ae=function(e){return F()(e).fromNow()},ne=Object(n.memo)((function(e){var t=e.visible,a=e.history,c=Object(n.useState)(!1),s=Object(u.a)(c,2),l=s[0],o=s[1],i=function(e){return e.map((function(e){return r.a.createElement(n.Fragment,{key:Object(C.v4)()},r.a.createElement("div",{className:"TermHistory__session"},r.a.createElement("div",{title:F()(e.date).format("MMMM DD, YYYY (HH:mm)"),className:"TermHistory__date"},ae(e.date)),r.a.createElement("div",{key:Object(C.v4)(),className:"TermHistory__history"},e.content.map((function(e,t){return r.a.createElement("span",{key:"passfail-".concat(e,"-").concat(t),style:{width:"20px",height:"20px",display:"inline-block",margin:"0.2rem",borderRadius:"50%",backgroundColor:"pass"===e?"seagreen":"orangered"}}," ")})))))}))}(a);return r.a.createElement(r.a.Fragment,null,t&&r.a.createElement("div",{className:"TermHistory"},r.a.createElement("div",{className:"TermHistory__header"},r.a.createElement("div",{className:"TermHistory__header--desc"},"You've reviewed this term ",i.length," time",1===i.length?"":"s"),i.length>1&&r.a.createElement("button",{className:"TermHistory__header--button",onClick:function(){return o(!l)}},l?"Collapse history":"Expand history")),l?i.reverse():i[i.length-1]))})),re=Object(n.memo)((function(e){var t=e.handleTermDelete,a=e.term,c=e.idx,s=Object(n.useState)((function(){return{from:a.from,to:a.to}})),l=Object(u.a)(s,2),o=l[0],i=l[1],f=Object(n.useState)(!1),b=Object(u.a)(f,2),E=b[0],v=b[1],p=Object(n.useState)(!1),g=Object(u.a)(p,2),h=g[0],O=g[1],j=Object(n.useState)(!1),_=Object(u.a)(j,2),w=_[0],N=_[1],y=Object(n.useContext)(X),k=y.listContextValue,L=y.setListContextValue,C=Object(n.useState)(!1),S=Object(u.a)(C,2),x=S[0],T=S[1],H=Y(Object(m.a)({},G())),P=(H.response,H.setRequest);Object(n.useEffect)((function(){return function(){v(!1),O(!1),N(!1)}}),[]);var F=function(e){var t=e.currentTarget.getAttribute("side");if(e.target.value&&o[t]!==e.target.value){var a=Object(m.a)(Object(m.a)({},o),{},Object(d.a)({},t,e.target.value));i(a);var n=Object(R.a)(k.content);n[c]=Object(m.a)({},a);var r=Object(m.a)(Object(m.a)({},k),{},{content:Object(R.a)(n)});L(r),P((function(){return z(k.owner,{_id:k._id,owner:k.owner},r)}))}};return r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:"List__term",onMouseEnter:function(){return N(!0)},onMouseLeave:function(){return N(!1)}},r.a.createElement("div",{className:"term"},!E&&w?r.a.createElement(r.a.Fragment,null,r.a.createElement($,{confirmingDelete:h,isHovering:w,setConfirmingDelete:O,handleConfirmClick:function(e,a){e.preventDefault(),O(!1),"delete"===a.type&&t(c)}})):r.a.createElement("div",{style:{color:h?"orangered":""},className:"term--index"},c+1),r.a.createElement("input",{disabled:h,style:{backgroundColor:h?"orangered":""},onBlur:F,className:"term--side term--from",side:"from",type:"text",defaultValue:o.from}),r.a.createElement("input",{disabled:h,style:{backgroundColor:h?"orangered":""},onBlur:F,className:"term--side term--to",side:"to",type:"text",defaultValue:o.to}),(x||w&&!h)&&r.a.createElement("button",{className:"List__term--historybutton",onClick:function(){return T(!x)}},"hist"))),r.a.createElement(ne,{visible:x,history:a.history}))})),ce=Object(n.memo)((function(e){var t=Object(n.useState)(null),a=Object(u.a)(t,2),c=a[0],s=a[1],o=Object(n.useState)(null),i=Object(u.a)(o,2),d=i[0],b=i[1],E=g(),v=E.params,p=E.location,h=Object(n.useContext)(X).setListContextValue,j=Y(Object(m.a)({},J())),_=j.response,w=j.setRequest,N=Y(Object(m.a)({},G())),y=(N.response,N.setRequest),k=Y(Object(m.a)({},{request:function(e,t){return O.a.delete("/db/u/".concat(e,"/list"),{params:t})},handleResponse:V,handleError:W})),L=k.response,R=k.setRequest;f("deleteresponse",L),Object(n.useEffect)((function(){w((function(){return K(v.username,{_id:v.id})}))}),[]),Object(n.useEffect)((function(){_&&(s(_),h(_))}),[_]),Object(n.useEffect)((function(){c&&c.sessions.length>0&&console.log(function(e,t){var a=F()(e.sessions[t].start),n=F()(e.sessions[t].end),r=e.content.map((function(e){return Date(a)===Date(e.history[t].date)?e.history[t].content:null})).filter((function(e){return null!==e}));return{start:a,end:n,session:r}}(c,0)),c&&c.content&&c.content.length>0&&x()}),[c]);var C,S,x=function(){b(c.content.map((function(e,t){var a={handleTermDelete:T,key:"list-term-".concat(e.to,"-").concat(e.from),idx:t,term:e};return r.a.createElement(re,a)})))};function T(e){var t=Object(m.a)({},c);t.content.splice(e,1),t.numTerms=t.content.length,s(t),h(t),y((function(){return z(v.username,{_id:t._id,owner:t.owner},t)}))}function H(){R((function(){return e=v.username,t={_id:v.id},function(){return O.a.delete("/db/u/".concat(e,"/list"),{params:t})};var e,t}))}return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"PageWrapper"},r.a.createElement("div",{className:"List"},L&&JSON.stringify(L),c&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"PageHeader"},c.name," (",c.from," to ",c.to,")"),r.a.createElement("button",{className:"Button"},r.a.createElement(l.b,{to:"".concat(p.pathname,"/review")},"Review")),r.a.createElement("button",{className:"Button danger",onClick:function(){return H()}},"Delete this list"),r.a.createElement("section",{className:"List__info"},r.a.createElement("header",{className:"List__info--header"},"List info"),r.a.createElement("p",{className:"List__info--item"},"There are ",r.a.createElement("span",{className:"List__info--datum"},c.numTerms)," terms in this list."),c.lastReviewed?r.a.createElement("p",{className:"List__info--item"},"You last reviewed this list",r.a.createElement("span",{className:"List__info--datum"},(C=c.lastReviewed,S="hh:mma, MMMM Do",F()(C).format(S)))):r.a.createElement("p",{className:"List__info--item",style:{width:"max-content",backgroundColor:"blueviolet"}},"You haven't reviewed this list yet. Get on it!")),r.a.createElement("section",{className:"List__content"},r.a.createElement("ul",{className:"terms"},r.a.createElement("header",{className:"List__terms--header"},"Terms"),d))))))})),se=(a(71),function(){var e=g().params;e.username;return r.a.createElement("div",{className:"PageWrapper"},r.a.createElement("div",{className:"User"},r.a.createElement("div",{className:"PageHeader UserHeader"},"User page for /u/",e.username)))}),le=(a(72),Object(n.memo)((function(e){var t=e.list,a=g().params;return r.a.createElement("div",{style:{borderColor:function(e){var t=864e5;return e?e<t?"seagreen":e<2*t?"teal":e<3*t?"yellowgreen":e<7*t?"orange":"orangered":"#333"}(function(e){return e.lastReviewed?F()(new Date)-F()(e.lastReviewed):null}(t))},className:"ListsItem"},r.a.createElement("div",{className:"ListsItem__name"},r.a.createElement(l.b,{className:"Link",to:"/u/".concat(a.username,"/list/").concat(t._id)},t.name)),r.a.createElement("div",{className:"ListsItem__from"},t.from),r.a.createElement("div",{className:"ListsItem__to"},t.to),r.a.createElement("div",{className:"ListsItem__numTerms"},t.numTerms," terms in this list"),t.sessions.length>0&&r.a.createElement("div",{className:"ListsItem__since"},r.a.createElement("em",null,"last reviewed ",ae(t.sessions[t.sessions.length-1].end))))}))),oe=(a(73),Object(n.memo)((function(e){var t=Object(n.useState)(""),a=Object(u.a)(t,2),c=a[0],s=a[1],o=Object(n.useState)(null),i=Object(u.a)(o,2),m=i[0],d=i[1],f=Object(n.useState)("created"),b=Object(u.a)(f,2),E=b[0],v=b[1],p=g().params,h=Y({handleError:W,handleResponse:V}),j=h.response,_=h.setRequest,w=h.loading,N=h.error;Object(n.useEffect)((function(){_((function(){return e=p.username,function(){return O.a.get("/db/u/".concat(e,"/lists"))};var e}))}),[]),Object(n.useEffect)((function(){j&&d(y(j))}),[j]);var y=function(e){return e.map((function(e){return{name:e.name,lastReviewed:e.lastReviewed,created:e.created,element:r.a.createElement(le,{key:e._id,list:e})}}))};return r.a.createElement(r.a.Fragment,null,w&&r.a.createElement("div",{className:"PageWrapper"},"Loading lists.."),N&&JSON.stringify(N),j&&j.length>0&&r.a.createElement("div",{className:"PageWrapper"},r.a.createElement("div",{className:"PageHeader"},"Lists by ",r.a.createElement(l.b,{className:"Link",to:"/u/".concat(p.username)},"/u/",p.username)),r.a.createElement("button",{className:"Button"},r.a.createElement(l.b,{to:"/u/".concat(p.username,"/lists/new")},"Make a new list")),r.a.createElement("div",{className:"Lists__header"},r.a.createElement("div",{className:"Lists__filter"},r.a.createElement("label",{htmlFor:"filter",id:"Lists__filter--label"},"Filter lists by name"),r.a.createElement("input",{autoFocus:!0,onChange:function(e){var t=e.currentTarget.value;s(t.length>0?t:"")},placeholder:"e.g. 'chapter 2'",id:"Lists__filter",type:"text",name:"filter",value:c})),r.a.createElement("div",{className:"Lists__sort"},r.a.createElement("label",{id:"Lists__sort--label",htmlFor:"sort"},"Sort lists by"),r.a.createElement("select",{onChange:function(e){v(e.currentTarget.value)},value:E,name:"sort"},r.a.createElement("option",{value:"name"},"name"),r.a.createElement("option",{value:"created"},"creation date"),r.a.createElement("option",{value:"lastReviewed"},"last review date")))),r.a.createElement("div",{className:"Lists"},m&&m.filter((function(e){return e.name.toLowerCase().includes(c.toLowerCase())})).sort((function(e,t){return e[E]<t[E]?-1:1})).map((function(e){return e.element})))),j&&0===j.length&&r.a.createElement("div",{className:"PageWrapper"},r.a.createElement("div",{className:"PageHeader"},"Lists by ",r.a.createElement(l.b,{className:"Link",to:"/u/".concat(p.username)},"/u/",p.username)),r.a.createElement("div",{className:"Lists__new"},"It appears you don't have any lists."),r.a.createElement("button",{className:"Button"},r.a.createElement(l.b,{to:"/u/".concat(p.username,"/lists/new")},"Make a new list"))))}))),ie=(a(30),Object(n.memo)((function(e){var t=e.index,a=e.formOutput,n=e.setFormOutput,c=function(e,t){var r=Object(m.a)({},a);!r.content[t]&&e.target.value&&(r.content[t]={to:"",from:""}),e.target.value&&e.target.value!==r.content[t][e.target.name]&&(r.content[t][e.target.name]=e.target.value,n(Object(m.a)(Object(m.a)({},a),{},{content:r.content})))};return r.a.createElement("div",{className:"NewList__term"},r.a.createElement("div",{className:"NewList__term--index"},t+1),r.a.createElement("input",{className:"NewList__term--input",onBlur:function(e){return c(e,t)},type:"text",name:"from"}),r.a.createElement("input",{className:"NewList__term--input",onBlur:function(e){return c(e,t)},type:"text",name:"to"}))}))),ue=Object(n.memo)((function(e){var t=g().params,a=Object(n.useState)(10),c=Object(u.a)(a,2),s=c[0],l=c[1],o=Object(n.useState)((function(){return{name:"",from:"",to:"",content:new Array(s),created:null,numTerms:0}})),i=Object(u.a)(o,2),b=i[0],E=i[1],v=Object(n.useState)([]),p=Object(u.a)(v,2),h=p[0],j=p[1],_=Y(Object(m.a)({},{request:function(e,t){return O.a.post("/db/u/".concat(e,"list"),{newList:t})},handleResponse:V,handleError:W})),w=_.response,N=_.setRequest;f("postresponse",w),Object(n.useEffect)((function(){j(function(e,t){for(var a=[],n=0;n<t;n++)a.push(r.a.createElement(ie,{key:"term-".concat(n+1),index:n,formOutput:e,setFormOutput:E}));return a}(b,s))}),[b,s]);var y=function(e){e.currentTarget.value!==b[e.currentTarget.name]&&E(Object(m.a)(Object(m.a)({},b),{},Object(d.a)({},e.currentTarget.name,e.currentTarget.value)))};return r.a.createElement("div",{className:"NewList"},r.a.createElement("div",{className:"PageHeader"},"New List"),r.a.createElement("form",{className:"NewList__form"},r.a.createElement("input",{className:"NewList__form--name",onBlur:y,type:"text",name:"name",placeholder:"List name"}),r.a.createElement("input",{className:"NewList__form--language",onBlur:y,type:"text",name:"from",placeholder:"Original language"}),r.a.createElement("input",{className:"NewList__form--language",onBlur:y,type:"text",name:"to",placeholder:"Translated language"}),r.a.createElement("div",{className:"NewList__terms"},r.a.createElement("input",{className:"Form__button",onClick:function(e){l(s+10)},type:"button",value:"Add rows"}),h.length>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"NewList__terms--header"},r.a.createElement("span",null),b&&r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:"Terms__header--side"},b.from),r.a.createElement("span",{className:"Terms__header--side"},b.to))),h)),r.a.createElement("input",{className:"Form__button",onClick:function(e){e.preventDefault(),console.log("user:",t.username),N((function(){return e=t.username,a=Object(m.a)(Object(m.a)({owner:t.username},b),{},{content:b.content.filter((function(e){return null!==e}))}),function(){return O.a.post("/db/u/".concat(e,"/list"),{newList:a})};var e,a}))},type:"button",value:"Create list"})))}));F.a.extend(q.a);var me=function(e){var t=F()("2020-10-19");return r.a.createElement("div",{className:"Test"},t.fromNow())},de=(a(74),Object(n.memo)((function(e){return r.a.createElement("div",{className:"PageWrapper"},r.a.createElement("div",{className:"Home"},r.a.createElement("div",{className:"PageHeader"},"Home"),r.a.createElement("div",{className:"Home__description"},r.a.createElement("section",null,r.a.createElement("header",{className:"Home__header"},"About"),r.a.createElement("p",{className:"Home__paragraph"},r.a.createElement("span",null,"Mana is a ",r.a.createElement("a",{className:"Home__link",href:"https://en.wikipedia.org/wiki/Spaced_repetition"},"spaced-repetition")," language learning application I built to streamline the language studying I do in my own free time, but of course anyone who shares my studying mindset and can benefit from this application is welcome to partake!"),r.a.createElement("span",null,"Spaced-repetition learning principles are quite straightforward: each (vocabulary) term is implemented as a virtual flash card. Learning intervals are chosen based on your preferences, and on how well you know each term. This way, things you know won't come up as often in review, placing the focus on what you ",r.a.createElement("em",null,"don't")," know, thereby increasing retention, and saving a lot of time."),r.a.createElement("span",null,"Besides the benefits of having an application made specifically for my learning preferences, building the application has served me very well in refining my web development skillset, and hence the project has become one my fullstack web development portfolio projects. The source code is available on my ",r.a.createElement("a",{className:"Home__link",href:"https://github.com/seerden/mana"},"GitHub"),"."))),r.a.createElement("section",null,r.a.createElement("header",{className:"Home__header"},"Getting started"),r.a.createElement("p",{className:"Home__paragraph"},r.a.createElement("span",null,"If you're just taking a look at the application, please click ",r.a.createElement("a",{className:"Home__link",href:"/"},"here")," to be logged in as a temporary user. You'll see a number of lists having been created already, including some review activity, so you can fully explore the functionality the application has to offer. Changes you make will persist to the database, but the temporary account and all its content will be removed after two hours. If you like what you've experienced within that time, go ahead and make an actual account!"))),r.a.createElement("section",null,r.a.createElement("header",{className:"Home__header"},"Register")),r.a.createElement("p",{className:"Home__paragraph"},r.a.createElement("span",null,"If you're ready to make an account, click ",r.a.createElement(l.b,{className:"Home__link",to:"/register"},"here")," to register. It's free, and no personal information will be requested or stored.")))))}))),fe=(a(75),function(e){var t=Object(n.useState)(null),a=Object(u.a)(t,2),c=a[0],s=a[1],l=Object(n.useState)({username:null,password:null}),o=Object(u.a)(l,2),i=o[0],m=o[1];f("new user",i);var d=function(e){(function(e){return O.a.post("/db/u/register",{newUser:e}).then((function(e){return e.data})).catch((function(e){return e}))})(e).then((function(e){return s(e)})).catch((function(e){return console.log(e.response.status)}))};return r.a.createElement("div",{className:"PageWrapper"},r.a.createElement("div",{className:"Register"},!c&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"PageHeader"},"Register a new account"),r.a.createElement("form",{className:"Register__form"},r.a.createElement("label",{htmlFor:"username"},"Username"),r.a.createElement("input",{onBlur:function(e){return b(e,i,m)},type:"text",name:"username"}),r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{onBlur:function(e){return b(e,i,m)},type:"password",name:"password"}),r.a.createElement("input",{onClick:function(){return d(i)},className:"Register__button",type:"button",value:"Register"}))),c&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,JSON.stringify(c)))))}),be=Object(n.memo)((function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"App__wrapper"},r.a.createElement(p,null,r.a.createElement(l.a,null,r.a.createElement(N,null),r.a.createElement("div",{className:"App"},r.a.createElement(Z,null,r.a.createElement(o.c,null,r.a.createElement(o.a,{path:"/test",element:r.a.createElement(me,null)}),r.a.createElement(o.a,{path:"/",element:r.a.createElement(de,null)}),r.a.createElement(o.a,{path:"/register",element:r.a.createElement(fe,null)}),r.a.createElement(o.a,{path:"/login",element:r.a.createElement(j,null)}),r.a.createElement(o.a,{path:"/u/:username"},r.a.createElement(w,{path:"/",component:se}),r.a.createElement(o.a,{path:"/lists"},r.a.createElement(w,{path:"/",component:oe}),r.a.createElement(w,{path:"/new",component:ue})),r.a.createElement(o.a,{path:"/list"},r.a.createElement(o.a,{path:"/:id"},r.a.createElement(o.a,{path:"/review",element:r.a.createElement(T,null,r.a.createElement(_,{component:Q}))}),r.a.createElement(w,{path:"/",component:ce})))),r.a.createElement(o.a,{path:"*",element:r.a.createElement("div",null,"404")})))),r.a.createElement(L,null)))))}));s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(be,null)),document.getElementById("root"))}},[[33,1,2]]]);
//# sourceMappingURL=main.3371fb5e.chunk.js.map